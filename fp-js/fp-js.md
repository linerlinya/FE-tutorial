# half-fp-js: pointfree-js ğŸ¶

half çš„åŸå› ï¼š

* å¦å¤–ä¸€åŠçœ‹ä¸æ‡‚
* å› ä¸ºçº¯å‡½æ•°è¦é¿å…å‰¯ä½œç”¨ï¼Œå¯¹äºå‰ç«¯ç»å¸¸æ“ä½œ DOM å¯èƒ½æ¯”è¾ƒä¸¥æ ¼ï¼ˆç°åœ¨ä½¿ç”¨æ¡†æ¶è®©æ¡†æ¶å¤„ç† DOM éƒ¨åˆ†ï¼Œè¿˜æ˜¯å¯è¡Œçš„ï¼‰
* pointfree éƒ¨åˆ†åœ¨ä½¿ç”¨åŸç”Ÿ JS æ—¶ä½¿ç”¨åœºæ™¯è¿˜æ˜¯æŒºå¤šçš„

## ä¸€ä¸ªç®€å•çš„ä¾‹å­

æˆ‘ä»¬ä»ä¸€ä¸ªæ„šè ¢çš„ä¾‹å­å¼€å§‹ã€‚é¸Ÿç¾¤åˆå¹¶åˆ™å˜æˆäº†ä¸€ä¸ªæ›´å¤§çš„é¸Ÿç¾¤ï¼Œç¹æ®–åˆ™å¢åŠ äº†é¸Ÿç¾¤çš„æ•°é‡ï¼Œå¢åŠ çš„æ•°é‡å°±æ˜¯å®ƒä»¬ç¹æ®–å‡ºæ¥çš„é¸Ÿçš„æ•°é‡ã€‚æ³¨æ„è¿™ä¸ªç¨‹åºå¹¶ä¸æ˜¯é¢å‘å¯¹è±¡çš„è‰¯å¥½å®è·µï¼Œå®ƒåªæ˜¯å¼ºè°ƒå½“å‰è¿™ç§å˜é‡èµ‹å€¼æ–¹å¼çš„ä¸€äº›å¼Šç«¯ã€‚

```js
// é¸Ÿç¾¤
class Flock {
  constructor(n) {
    this.seagulls = n
  }
  // åˆå¹¶
  conjoin(other) {
    this.seagulls += other.seagulls
    return this
  }
  // ç¹æ®–
  breed(other) {
    this.seagulls = this.seagulls * other.seagulls
    return this
  }
}

const flockA = new Flock(4)
const flockB = new Flock(2)
const flockC = new Flock(0)
const result = flockA
  .conjoin(flockC)
  .breed(flockB)
  .conjoin(flockA.breed(flockB)) // å†…éƒ¨çŠ¶æ€è¢«æ”¹å˜
  .seagulls
// 32
```

å¦‚æœä½ çœ‹ä¸æ‡‚è¿™ä¸ªç¨‹åºï¼Œæ²¡å…³ç³»ï¼Œæˆ‘ä¹Ÿçœ‹ä¸æ‡‚ã€‚é‡ç‚¹æ˜¯çŠ¶æ€å’Œå¯å˜å€¼éå¸¸éš¾ä»¥è¿½è¸ªï¼Œå³ä¾¿æ˜¯åœ¨è¿™ä¹ˆå°çš„ä¸€ä¸ªç¨‹åºä¸­ä¹Ÿä¸ä¾‹å¤–ã€‚

è¯•è¯•å¦ä¸€ç§æ›´å‡½æ•°å¼çš„å†™æ³•ï¼š

```js
const conjoin = (flockX, flockY) => flockX + flockY;
const breed = (flockX, flockY) => flockX * flockY;

const flockA = 4;
const flockB = 2;
const flockC = 0;
const result =
    conjoin(breed(flockB, conjoin(flockA, flockC)), breed(flockA, flockB))
// 16
```

æˆ‘ä»¬æŠŠå®ƒä»¬é‡å‘½åä¸€ä¸‹ï¼Œçœ‹çœ‹å®ƒä»¬çš„çœŸé¢ç›®ã€‚

```js
const add = (x, y) => x + y;
const multiply = (x, y) => x * y;

const flockA = 4;
const flockB = 2;
const flockC = 0;
const result =
    add(multiply(flockB, add(flockA, flockC)), multiply(flockA, flockB))
// 16
```

è¿™ä¹ˆä¸€æ¥ï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬ä¸è¿‡æ˜¯åœ¨è¿ç”¨æ—©å·²è·å¾—çš„çŸ¥è¯†ï¼š

```js
// ç»“åˆå¾‹ï¼ˆassosiativeï¼‰
add(add(x, y), z) === add(x, add(y, z))

// äº¤æ¢å¾‹ï¼ˆcommutativeï¼‰
add(x, y) === add(y, x)

// åŒä¸€å¾‹ï¼ˆidentityï¼‰
add(x, 0) === x

// åˆ†é…å¾‹ï¼ˆdistributiveï¼‰
multiply(x, add(y,z)) === add(multiply(x, y), multiply(x, z))
```

è¿ç”¨è¿™äº›å®šå¾‹ç®€åŒ–è¿™ä¸ªæµ·é¸¥å°ç¨‹åºï¼š

```js
// åŸæœ‰ä»£ç 
add(multiply(flockB, add(flockA, flockC)), multiply(flockA, flockB))

// åº”ç”¨åŒä¸€å¾‹ï¼Œå»æ‰å¤šä½™çš„åŠ æ³•æ“ä½œï¼ˆadd(flockA, flockC) == flockAï¼‰
add(multiply(flockB, flockA), multiply(flockA, flockB))

// å†åº”ç”¨åˆ†é…å¾‹
multiply(flockB, add(flockA, flockA))
```

> ## æ™®é€šå…¬æ°‘çš„å‡½æ•°
> 
> å½“æˆ‘ä»¬è¯´å‡½æ•°æ˜¯â€œä¸€ç­‰å…¬æ°‘â€çš„æ—¶å€™ï¼Œæˆ‘ä»¬å®é™…ä¸Šè¯´çš„æ˜¯å®ƒä»¬å’Œå…¶ä»–å¯¹è±¡éƒ½ä¸€æ ·...æ‰€ä»¥å°±æ˜¯æ™®é€šå…¬æ°‘ï¼ˆåç»æµèˆ±çš„äººï¼Ÿï¼‰ã€‚JS ä¸­å‡½æ•°çœŸæ²¡ä»€ä¹ˆç‰¹æ®Šçš„ï¼Œä½ å¯ä»¥åƒå¯¹å¾…ä»»ä½•å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·å¯¹å¾…å®ƒä»¬â€”â€”æŠŠå®ƒä»¬å­˜åœ¨æ•°ç»„é‡Œï¼Œå½“ä½œå‚æ•°ä¼ é€’ï¼Œèµ‹å€¼ç»™å˜é‡...ç­‰ç­‰ã€‚
> 
> ```js
> const hi = name => `Hi ${name}`
> const greeting = name => hi(name)
> 
> hi('there') // 'Hi there'
> greeting('there') // 'Hi there'
> ```
> 
> è¿™é‡Œ greeting æŒ‡å‘çš„é‚£ä¸ªæŠŠ hi åŒ…äº†ä¸€å±‚çš„åŒ…è£¹å‡½æ•°å®Œå…¨æ˜¯å¤šä½™çš„
> 
> ```js
> const greeting = hi
> ```
> 
> æ¢å¥è¯è¯´ï¼Œhi å·²ç»æ˜¯ä¸ªæ¥å—ä¸€ä¸ªå‚æ•°çš„å‡½æ•°äº†ï¼Œä¸ºä½•è¦å†å®šä¹‰ä¸€ä¸ªé¢å¤–çš„åŒ…è£¹å‡½æ•°ï¼Œè€Œå®ƒä»…ä»…æ˜¯ç”¨è¿™ä¸ªç›¸åŒçš„å‚æ•°è°ƒç”¨ hiï¼Ÿå®Œå…¨æ²¡æœ‰é“ç†ã€‚è¿™å°±åƒåœ¨å¤§å¤å¤©é‡Œç©¿ä¸Šä½ æœ€åšçš„å¤§è¡£ï¼Œåªæ˜¯ä¸ºäº†è·Ÿçƒ­ç©ºæ°”è¿‡ä¸å»ï¼Œç„¶ååƒä¸Šä¸ªå†°æ£ã€‚çœŸæ˜¯è„±è£¤å­æ”¾å±å¤šæ­¤ä¸€ä¸¾ã€‚
> 
> æˆ‘ä»¬å†æ¥çœ‹å‡ ä¸ªä¾‹å­ã€‚ä»¥ä¸‹ä»£ç éƒ½æ¥è‡ª npm ä¸Šçš„æ¨¡å—åŒ…ï¼š
> 
> ```js
> // å¤ªå‚»äº†
> const getServerStuff = callback => ajaxCall(json => callback(json));
> 
> // è¿™æ‰åƒæ ·
> const getServerStuff = ajaxCall;
> ```
> 
> ä¸–ç•Œä¸Šåˆ°å¤„éƒ½å……æ–¥ç€è¿™æ ·çš„åƒåœ¾ ajax ä»£ç ã€‚ä»¥ä¸‹æ˜¯ä¸Šè¿°ä¸¤ç§å†™æ³•ç­‰ä»·çš„åŸå› ï¼š
> 
> ```js
> // è¿™è¡Œ
> ajaxCall(json => callback(json));
> 
> // ç­‰ä»·äºè¿™è¡Œ
> ajaxCall(callback);
> 
> // é‚£ä¹ˆï¼Œé‡æ„ä¸‹ getServerStuff
> const getServerStuff = callback => ajaxCall(callback);
> 
> // ...å°±ç­‰äº
> const getServerStuff = ajaxCall // <-- çœ‹ï¼Œæ²¡æœ‰æ‹¬å·å“¦
> ```
> 
> é¡¹ç›®ä¸­å¸¸è§çš„ä¸€ç§é€ æˆæ··æ·†çš„åŸå› æ˜¯ï¼Œé’ˆå¯¹åŒä¸€ä¸ªæ¦‚å¿µä½¿ç”¨ä¸åŒçš„å‘½åã€‚è¿˜æœ‰é€šç”¨ä»£ç çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼Œä¸‹é¢è¿™ä¸¤ä¸ªå‡½æ•°åšçš„äº‹æƒ…ä¸€æ¨¡ä¸€æ ·ï¼Œä½†åä¸€ä¸ªå°±æ˜¾å¾—æ›´åŠ é€šç”¨ï¼Œå¯é‡ç”¨æ€§ä¹Ÿæ›´é«˜ï¼š
> 
> ```js
> // åªé’ˆå¯¹å½“å‰çš„åšå®¢
> const validArticles = articles =>
>   articles.filter(article => article !== null > && article !== undefined);
> // å¯¹æœªæ¥çš„é¡¹ç›®æ›´å‹å¥½
> const compact = xs => xs.filter(x => x !== > null && x !== undefined);
> ```
> 
> åœ¨å‘½åçš„æ—¶å€™ï¼Œæˆ‘ä»¬ç‰¹åˆ«å®¹æ˜“æŠŠè‡ªå·±é™å®šåœ¨ç‰¹å®šçš„æ•°æ®ä¸Šï¼ˆæœ¬ä¾‹ä¸­æ˜¯ articlesï¼‰ã€‚
> 
> æœ‰ä¸€ç‚¹æˆ‘å¿…é¡»å¾—æŒ‡å‡ºï¼Œä½ ä¸€å®šè¦éå¸¸å°å¿ƒ this å€¼ï¼Œåˆ«è®©å®ƒåå’¬ä½ ä¸€å£ï¼Œè¿™ä¸€ç‚¹ä¸é¢å‘å¯¹è±¡ä»£ç ç±»ä¼¼ã€‚å¦‚æœä¸€ä¸ªåº•å±‚å‡½æ•°ä½¿ç”¨äº† thisï¼Œè€Œä¸”æ˜¯ä»¥ä¸€ç­‰å…¬æ°‘çš„æ–¹å¼è¢«è°ƒç”¨çš„ï¼Œé‚£ä½ å°±ç­‰ç€ JS è¿™ä¸ªè¹©è„šçš„æŠ½è±¡æ¦‚å¿µå‘æ€’å§ã€‚
> 
> ```js
> var fs = require('fs');
> 
> // å¤ªå¯æ€•äº†
> fs.readFile('freaky_friday.txt', Db.save);
> 
> // å¥½ä¸€ç‚¹ç‚¹
> fs.readFile('freaky_friday.txt', Db.save.bind(Db));
> ```
> 
> æŠŠ Db ç»‘å®šï¼ˆbindï¼‰åˆ°å®ƒè‡ªå·±èº«ä¸Šä»¥åï¼Œä½ å°±å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°è°ƒç”¨å®ƒçš„åŸå‹é“¾å¼åƒåœ¾ä»£ç äº†ã€‚this å°±åƒä¸€å—è„å°¿å¸ƒï¼Œæˆ‘å°½å¯èƒ½åœ°é¿å…ä½¿ç”¨å®ƒï¼Œå› ä¸ºåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­æ ¹æœ¬ç”¨ä¸åˆ°å®ƒã€‚ç„¶è€Œï¼Œåœ¨ä½¿ç”¨å…¶ä»–çš„ç±»åº“æ—¶ï¼Œä½ å´ä¸å¾—ä¸å‘è¿™ä¸ªç–¯ç‹‚çš„ä¸–ç•Œä½å¤´ã€‚
> 
> ä¹Ÿæœ‰äººåé©³è¯´ this èƒ½æé«˜æ‰§è¡Œé€Ÿåº¦ã€‚å¦‚æœä½ æ˜¯è¿™ç§å¯¹é€Ÿåº¦å¹æ¯›æ±‚ç–µçš„äººï¼Œé‚£ä½ è¿˜æ˜¯åˆä¸Šè¿™æœ¬ä¹¦å§ã€‚è¦æ˜¯æ²¡æ³•é€€è´§é€€æ¬¾ï¼Œä¹Ÿè®¸ä½ å¯ä»¥å»æ¢ä¸€æœ¬æ›´å…¥é—¨çš„ä¹¦æ¥è¯»ã€‚
> 
> è‡³æ­¤ï¼Œæˆ‘ä»¬æ‰å‡†å¤‡å¥½ç»§ç»­åé¢çš„ç« èŠ‚ã€‚

## çº¯å‡½æ•°

> çº¯å‡½æ•°æ˜¯è¿™æ ·ä¸€ç§å‡½æ•°ï¼Œå³`ç›¸åŒçš„è¾“å…¥ï¼Œæ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡º`ï¼Œè€Œä¸”`æ²¡æœ‰ä»»ä½•å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨`ã€‚

çº¯å‡½æ•°å°±æ˜¯æ•°å­¦ä¸Šçš„å‡½æ•°

æˆ‘ä»¬è¯´ slice ç¬¦åˆçº¯å‡½æ•°çš„å®šä¹‰æ˜¯å› ä¸ºå¯¹ç›¸åŒçš„è¾“å…¥å®ƒä¿è¯èƒ½è¿”å›ç›¸åŒçš„è¾“å‡ºã€‚è€Œ splice å´ä¼šåš¼çƒ‚è°ƒç”¨å®ƒçš„é‚£ä¸ªæ•°ç»„ï¼Œç„¶åå†åå‡ºæ¥ï¼›è¿™å°±ä¼šäº§ç”Ÿå¯è§‚å¯Ÿåˆ°çš„å‰¯ä½œç”¨ï¼Œå³è¿™ä¸ªæ•°ç»„æ°¸ä¹…åœ°æ”¹å˜äº†ã€‚

"immutable"

> å‰¯ä½œç”¨æ˜¯åœ¨è®¡ç®—ç»“æœçš„è¿‡ç¨‹ä¸­ï¼Œç³»ç»ŸçŠ¶æ€çš„ä¸€ç§å˜åŒ–ï¼Œæˆ–è€…ä¸å¤–éƒ¨ä¸–ç•Œè¿›è¡Œçš„å¯è§‚å¯Ÿçš„äº¤äº’ã€‚

å‰¯ä½œç”¨å¯èƒ½åŒ…å«ï¼Œä½†ä¸é™äºï¼š

* æ›´æ”¹æ–‡ä»¶ç³»ç»Ÿ
* å¾€æ•°æ®åº“æ’å…¥è®°å½•
* å‘é€ä¸€ä¸ª http è¯·æ±‚
* å¯å˜æ•°æ®
* æ‰“å°/log
* è·å–ç”¨æˆ·è¾“å…¥
* DOM æŸ¥è¯¢
* è®¿é—®ç³»ç»ŸçŠ¶æ€

è¿™å¹¶ä¸æ˜¯è¯´ï¼Œè¦ç¦æ­¢ä½¿ç”¨ä¸€åˆ‡å‰¯ä½œç”¨ï¼Œè€Œæ˜¯è¯´ï¼Œè¦è®©å®ƒä»¬åœ¨å¯æ§çš„èŒƒå›´å†…å‘ç”Ÿã€‚å¦‚ä½•æ§åˆ¶å®ƒä»¬ï¼š`functor` å’Œ `monad`

## æŸ¯é‡ŒåŒ–ï¼ˆcurryï¼‰

> åªä¼ é€’ç»™å‡½æ•°ä¸€éƒ¨åˆ†å‚æ•°æ¥è°ƒç”¨å®ƒï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°å»å¤„ç†å‰©ä¸‹çš„å‚æ•°ã€‚

```js
const add = x => y => x + y
```

è¿™å°±æ˜¯ä¸€ä¸ªæŸ¯é‡ŒåŒ–çš„ +ï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œæœ€åå†è¯´

æ›´åŠ é€šç”¨çš„å®ç°ï¼š

ç”¨ bind å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°

> MDNï¼šbind()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨bind()è¢«è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæ–°å‡½æ•°çš„thisè¢«bindçš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šï¼Œå…¶ä½™çš„å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°ä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚

å‡½æ•°å¼ç¼–ç¨‹ä¸­ä¸ç”¨ thisï¼Œæˆ‘ä»¬æŠŠå…³äº this çš„éƒ¨åˆ†å¿½ç•¥ï¼š

bind æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨ bind è¢«è°ƒç”¨æ—¶ï¼Œ~~é™¤ç¬¬ä¸€ä¸ªå‚æ•°ä»¥å¤–çš„~~å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°ä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚

å—¯ï¼Œæœ‰æŸ¯é‡ŒåŒ–å†…å‘³

![bind](./bind.png)

```js
// curry :: ((a, b, ...) -> c) -> a -> b -> ... -> c
function curry(fn) {
  const arity = fn.length

  return function $curry(...args) {
    if (args.length < arity) {
      return $curry.bind(null, ...args)
    }

    return fn.call(null, ...args)
  }
}
```

```js
const curry = (fn, arity = fn.length, ...args) =>
  arity <= args.length ? fn(...args) : curry.bind(null, fn, arity, ...args)
```

## ç»„åˆï¼ˆcomposeï¼‰

å¤šä¸ªå‡½æ•°ç»„åˆå‡ºä¸€ä¸ªæ–°çš„å‡½æ•°

```js
const simpleCompose = (f, g) => x => f(g(x))
```

åœ¨ compose çš„å®šä¹‰ä¸­ï¼Œg å°†å…ˆäº f æ‰§è¡Œï¼Œå› æ­¤å°±åˆ›å»ºäº†ä¸€ä¸ª`ä»å³åˆ°å·¦`çš„æ•°æ®æµã€‚

```js
const compose = (...fns) => fns.reduce((f, g) => (...args) => f(g(...args)))
```

ä»å³å‘å·¦æ‰§è¡Œæ›´åŠ èƒ½å¤Ÿåæ˜ æ•°å­¦ä¸Šçš„å«ä¹‰â€”â€”ç»„åˆçš„æ¦‚å¿µç›´æ¥æ¥è‡ªäºæ•°å­¦è¯¾æœ¬ã€‚å®é™…ä¸Šï¼Œæ‰€æœ‰çš„ç»„åˆéƒ½æœ‰ä¸€ä¸ªç‰¹æ€§ï¼š

ç»“åˆå¾‹

```js
// associativity
compose(f, compose(g, h)) === compose(compose(f, g), h);
```

![composition](./composition.png)

ä¾‹å­ï¼š

```js
const toUpperCase = s => s.toUpperCase()
const exclaim = s => `${s}!`
const shout = compose(exclaim, toUpperCase)

shout('awesome') // AWESOME!
```

## pointfree

> ä¸ä½¿ç”¨æ‰€è¦å¤„ç†çš„å€¼ï¼Œåªåˆæˆè¿ç®—è¿‡ç¨‹

> å‡½æ•°æ— é¡»æåŠå°†è¦æ“ä½œçš„æ•°æ®æ˜¯ä»€ä¹ˆæ ·çš„

é pointfree çš„ shoutï¼š

```js
const shout = s => `${s.toUpperCase()}!`
```

> Pointfree çš„æœ¬è´¨å°±æ˜¯ä½¿ç”¨ä¸€äº›é€šç”¨çš„å‡½æ•°ï¼Œç»„åˆå‡ºå„ç§å¤æ‚è¿ç®—ã€‚ä¸Šå±‚è¿ç®—ä¸è¦ç›´æ¥æ“ä½œæ•°æ®ï¼Œè€Œæ˜¯é€šè¿‡åº•å±‚å‡½æ•°å»å¤„ç†ã€‚è¿™å°±è¦æ±‚ï¼Œå°†ä¸€äº›å¸¸ç”¨çš„æ“ä½œå°è£…æˆå‡½æ•°ã€‚

```js
const add = x => y => x + y
const multiply = x => y => x * y
const prop = p => obj => obj[p]
const last = xs => xs[xs.length - 1];
const map = fn => xs => xs.map(fn)
const reduce = fn => head => xs => xs.reduce(fn, head)
const sortBy = fn => xs => [...xs].sort((a, b) => fn(a) - fn(b)) // immutable
const concat = curry((a, b) => a.concat(b))
const flip = curry((fn, a, b) => fn(b, a))
```

ä¾‹å­ï¼š

ç”¨ pointfree çš„æ–¹å¼é‡æ„ï¼š

```js
const cars = [{
  name: 'Aston Martin One-77',
  horsepower: 750,
  dollarValue: 1850000,
  inStock: true,
}, /* lots of cars */]

const average = arr => reduce(add, 0, arr) / arr.length

const averageDollarValue = (cars) => {
  const dollarValues = map(c => c.dollarValue, cars)
  return average(dollarValues)
}
```

```js
// averageDollarValue :: [Car] -> Int
const averageDollarValue = compose(average, map(prop('dollarValue')))
```

```js
const fastestCar = (cars) => {
  const sorted = sortBy(car => car.horsepower)(cars)
  const fastest = last(sorted)
  return concat(fastest.name, ' is the fastest')
}
```

```js
// append :: String -> String -> String
const append = flip(concat)

// fastestCar :: [Car] -> String
const fastestCar = compose(
  append(' is the fastest'),
  prop('name'),
  last,
  sortBy(prop('horsepower')),
)
```

## more FP

![yyx](./yyx.png)

JS åªèƒ½æ¨¡æ‹Ÿ FPï¼Œå°±åƒæ¨¡æ‹ŸåŸºäºç±»çš„ OO ä¸€æ ·

> * `Functions as first-class values: å‡½æ•°ä¸€ç­‰å…¬æ°‘`, å¯ä»¥æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’, ä»è€Œæ„é€ å‡ºé«˜é˜¶å‡½æ•°å„ç§ç”¨æ³•. è¿™ä¸ªç”¨æ³•å„ç§è¯­è¨€éƒ½æ”¯æŒäº†: Lua æ”¯æŒ, Python ä¼¼ä¹ä¹Ÿæ”¯æŒ, Java ä¹Ÿå¼€å§‹æ”¯æŒäº†, æˆ‘ä¼šçš„è¯­è¨€å°‘éƒ½ä¸¾ä¸å‡ºæ¥ä¸æ”¯æŒä¼ å‡½æ•°çš„æµè¡Œè¯­è¨€.
>
> * `Pure functions, çº¯å‡½æ•°.` å¯ä»¥å†™, ä½†ä¹Ÿæœ‰å¾ˆå¤§åŒºåˆ«. JavaScript æ²¡é™åˆ¶, ä»è€Œä¸èƒ½é¢„åˆ¤å‡½æ•°çº¯æˆ–è€…ä¸çº¯. Clojure éµå¾ª Lisp é£æ ¼çš„çº¦å®š, å¸¦å‰¯ä½œç”¨çš„å‡½æ•°ä¸€èˆ¬ç”¨ f! è¿™ç§å¹å·ç»“å°¾çš„å†™æ³•å‘½å, è€Œç¼–è¯‘å™¨æ²¡æœ‰çº¦æŸ. Haskell æ˜¯ä¸¥æ ¼çº¦æŸçš„, å‡ºäº†åçš„ IO Monad å°±æ˜¯å› ä¸ºéµå¾ªçº¯å‡½æ•°å¯¼è‡´å‰¯ä½œç”¨éš¾ä»¥ç›´æ¥ç”¨æ•°å­¦å‡½æ•°è¡¨è¾¾å‡ºæ¥, æœ€ç»ˆç²¾å¿ƒè®¾è®¡å‡ºä¸€ä¸ªæ¦‚å¿µ.
>
> * `Referential transparency, å¼•ç”¨é€æ˜`, æ‰€ä»¥è¡¨è¾¾å¼å¯ä»¥è¢«å…¶è¿ç®—ç»“æœå®Œå…¨æ›¿æ¢æ‰, ä¹Ÿå°±æ˜¯è¦æ±‚æ§åˆ¶ç”šè‡³é¿å…å‰¯ä½œç”¨. 
>
> * `Controlled effects, å—æ§çš„å‰¯ä½œç”¨`, ä¸»è¦æ‰‹æ®µæ˜¯éš”ç¦». JavaScript éœ€è¦äººä¸ºåœ°å»éš”ç¦», è¯­è¨€å±‚é¢å®Œå…¨æ²¡æœ‰é™åˆ¶. Clojure ä¹Ÿéœ€è¦äººä¸ºéš”ç¦», å°±åƒå‰é¢è¯´çš„ f! é‚£æ ·çš„çº¦å®š, åŒæ—¶è§„å®šäº†æ•°æ®ä¸å¯å˜, å†åŠ ä¸Šä½œè€…æœ‰æ„åœ¨è¯­è¨€ä¸­å¼ºè°ƒæ§åˆ¶å‰¯ä½œç”¨, å®é™…ä¸Šå‰¯ä½œç”¨å°‘å¾—å¤š. Haskell é€šè¿‡ç±»å‹ç³»ç»Ÿé™å®š, ä¸éš”ç¦»å‰¯ä½œç”¨æ— æ³•é€šè¿‡ç¼–è¯‘çš„.
>
> * `Everything is an expression, ä¸€åˆ‡çš†æ˜¯è¡¨è¾¾å¼.` JavaScript åšä¸åˆ°, å¯¼è‡´è®¾è®¡ DSL æ—¶å€™å¾ˆå¤´ç–¼, å€’æ˜¯ CoffeeScript åšåˆ°äº†. Clojure ç»§æ‰¿äº† Lisp, å¾ˆæ˜æ˜¾ä¸€åˆ‡çš†æ˜¯è¡¨è¾¾å¼. Haskell ä»£ç é‡Œéƒ½æ˜¯å‡½æ•°, é™¤äº†ç±»å‹å£°æ˜å’Œè¯­æ³•ç³–éƒ¨åˆ†, ä¹Ÿæ˜¯ä¸€åˆ‡çš†æ˜¯è¡¨è¾¾å¼.
>
> * `No loops, æ¢å¥è¯è¯´, ä¸èƒ½ç”¨ for/while`, å› ä¸ºè¿™ä¸¤ä¸ªå†™æ³•å½“ä¸­çš„ i++ ä¾èµ–å¯å˜æ•°æ®. JavaScript ç»å¸¸ä½¿ç”¨ for/while. Clojure å½“ä¸­çš„å¾ªç¯åŸºæœ¬ä¸Šç”¨å°¾é€’å½’å®ç°, åŒæ—¶ä¹Ÿæä¾›äº† doseq ä¹‹ç±»çš„ Macro è®©å¾ªç¯è¿‡ç¨‹å¾ˆå¥½å†™. Haskell å°±æ˜¯å®Œå…¨å°¾é€’å½’çš„å†™æ³•äº†.
>
> * `Immutable values.` JavaScript é»˜è®¤å¯å˜, ä»…æœ‰çš„æ‰‹æ®µç”¨ Object.freeze å¯ä»¥å¼ºè¡Œé”å®šå¯¹è±¡æˆ–è€… const é”å®šå˜é‡æœ¬èº«, å¦å¤–å°±æ˜¯ immutable-js é‚£æ ·çš„å…±äº«ç»“æ„çš„ä¸å¯å˜æ•°æ®ä½œä¸ºç±»åº“æ¥å®ç°. Clojure æ˜¯æŠŠä¸å¯å˜æ•°æ®å’Œç»“æ„å…±äº«ä½œä¸ºè¯­è¨€çš„åŸºç¡€, ä¸“é—¨è®¾è®¡äº† Atom ç±»å‹ç”¨äºæ¨¡æ‹Ÿå…±äº«çš„å¯å˜çŠ¶æ€, ä¹Ÿä¸æ’é™¤æŸäº›åœºæ™¯å’Œå®¿ä¸»è¯­è¨€çš„äº’æ“ä½œè¿˜æ˜¯ä¼šæœ‰å¯å˜æ•°æ®. Haskell é»˜è®¤å°±æ˜¯ä¸å¯å˜æ•°æ®, ä¹Ÿæœ‰ IORef ç›¸å…³çš„ä»£ç å¯ä»¥æ¨¡æ‹Ÿå¯å˜çŠ¶æ€, ä½†åœ¨æ•™ç¨‹é‡Œå‡ ä¹çœ‹ä¸åˆ°.
>
> * `Algebraic Datatypes, ä»£æ•°ç±»å‹ç³»ç»Ÿ.` JavaScript æ²¡æœ‰é™æ€ç±»å‹ç³»ç»Ÿ, TypeScript æœ‰ç±»å‹, ä½†å’Œä»£æ•°ç±»å‹è¿˜ä¸ä¸€æ ·. Clojure æ²¡æœ‰é™æ€ç±»å‹ç³»ç»Ÿ, å°±ç®—æœ‰è€Œåªæ˜¯å¾ˆåŸºç¡€çš„ç±»å‹æ£€æŸ¥, æˆ–è€…ç”¨ Specs åšè¯¦ç»†è¿è¡Œæ—¶æ£€æŸ¥. Haskell æœ‰å¼ºå¤§çš„ä»£æ•°ç±»å‹ç³»ç»Ÿ, å³ä¾¿æ˜¯å‰¯ä½œç”¨ä¹Ÿè¢«æ¶µç›–åœ¨ç±»å‹ç³»ç»Ÿå½“ä¸­.
>
> * `Product types.` Haskell é€šè¿‡ä»£æ•°ç±»å‹ç³»ç»Ÿæ”¯æŒ.No Null. JavaScript å½“ä¸­æœ‰ undefined å’Œ null. Clojure å½“ä¸­åªæœ‰ nil. Haskell é‡Œæ²¡æœ‰ null ä¹Ÿæ²¡æœ‰ nil, è€Œæ˜¯ç”¨äº† Maybe Monad è¿™æ ·çš„æ¦‚å¿µ, é€šè¿‡ç±»å‹ç³»ç»Ÿè¿›è¡Œäº†æŠ½è±¡å’Œé™åˆ¶. null çš„é—®é¢˜å¾ˆæ·±, ç½‘ä¸Šæ‰¾è§£é‡Šå§, æˆ‘è¿˜æ²¡ç†è§£æ¸…æ¥š, åªäº†è§£åˆ°æ»¡è¶³äº†æ–¹ä¾¿å´é€ æˆäº†æ„æ–™ä¹‹å¤–çš„å¤æ‚åº¦.
>
> * `A function always returns a value, å‡½æ•°æ°¸è¿œéƒ½æœ‰è¿”å›å€¼`, ç±»ä¼¼ä¸€åˆ‡çš†æ˜¯è¡¨è¾¾å¼é‚£ä¸ªé—®é¢˜. æ¯”å¦‚ Haskell é‡Œä¼šæœ‰çš„å«åš Unit çš„ () ç©ºçš„å€¼. è¿™ä¸ªæœ‰ç‚¹è´¹è§£...Currying, æŸ¯ç†åŒ–. JavaScript å’Œ Clojure ä¹Ÿèƒ½æ¨¡æ‹Ÿ, è€Œåœ¨ Haskell å½“ä¸­æ˜¯é»˜è®¤è¡Œä¸º.
>
> * `Lexical scoping, è¯æ³•ä½œç”¨åŸŸ`. ä¸‰è€…éƒ½æ”¯æŒ.
>
> * `Closures, é—­åŒ…`, éƒ½æ”¯æŒ.
>
> * `Pattern matching, æ¨¡å¼åŒ¹é…`. ç±»ä¼¼è§£æ„èµ‹å€¼ä¹‹ç±»çš„åœ¨ JavaScript å’Œ Clojure å½“ä¸­é€šè¿‡è¯­æ³•ç³–ä¹Ÿç®—æœ‰è¿™ä¸ªåŠŸèƒ½, ä½†æ˜¯è·Ÿ Haskell ä»¥åŠ Elixir å½“ä¸­çš„ç”¨æ³•å¯¹æ¯”èµ·æ¥å·®è·å¾ˆå¤§. æ¯”å¦‚è¯´ Haskell ç”šè‡³èƒ½å®šä¹‰ let 1 + 1 = 3 æ¥è¦†ç›– + çš„è¡Œä¸º, è™½ç„¶æ˜¯å¥‡è‘©çš„ç°è±¡, ä½†è¿™å°±æ˜¯ä¸€ä¸ªå®šä¹‰çš„ pattern, åœ¨ JavaScript å’Œ Clojure éƒ½æ²¡æœ‰è¿™ç§æƒ…å†µ.
>
> * `Lazy evaluation, æƒ°æ€§è®¡ç®—`. JavaScript æ˜¯ä¸¥æ ¼æ±‚å€¼çš„, ä¸æ”¯æŒæƒ°æ€§è®¡ç®—. Clojure æ”¯æŒ Lazy, ç„¶è€Œç”±äº Clojure åˆå…è®¸äº†ä¸€äº›å‰¯ä½œç”¨, å®é™…ä¸ŠæŸäº›ç‰¹æ®Šåœºæ™¯ä¼šéœ€è¦æ‰‹åŠ¨ force ä»£ç æ‰§è¡Œ, ä¹Ÿå°±æ˜¯è¯´ä¸å®Œç¾. Haskell é‡‡ç”¨æƒ°æ€§è®¡ç®—. æƒ°æ€§è®¡ç®—å°±æ˜¯è¯´ä»£ç é‡Œçš„è¡¨è¾¾å¼è¢«çœŸæ­£ä½¿ç”¨æ¥æ‰ä¼šçœŸæ­£æ‰§è¡Œ, å¦åˆ™å°±åƒæ˜¯ä¸ª thunk, ç»§ç»­ä»¥è¡¨è¾¾å¼å­˜å‚¨ç€. æˆ‘å°è±¡é‡Œ Elm ç¤¾åŒºè¯´è¿‡, å¯¹äºå›¾å½¢ç•Œé¢æ¥è¯´ Lazy åè€Œæ˜¯å¤šä½™çš„.

## ref:

[mostly-adequate-guide](https://mostly-adequate.gitbooks.io/mostly-adequate-guide/content/)

[ä¸ºä»€ä¹ˆè¯´ JavaScript ä¸æ“…é•¿å‡½æ•°å¼ç¼–ç¨‹](https://zhuanlan.zhihu.com/p/24076438)

[awesome-fp-js](https://github.com/stoeffel/awesome-fp-js)
